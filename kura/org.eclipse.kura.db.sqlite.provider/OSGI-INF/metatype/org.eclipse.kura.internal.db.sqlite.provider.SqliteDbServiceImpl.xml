<?xml version="1.0" encoding="UTF-8"?>
<!--

    Copyright (c) 2022, 2023 Eurotech and/or its affiliates and others
  
    This program and the accompanying materials are made
    available under the terms of the Eclipse Public License 2.0
    which is available at https://www.eclipse.org/legal/epl-2.0/
 
    SPDX-License-Identifier: EPL-2.0

-->
<MetaData xmlns="http://www.osgi.org/xmlns/metatype/v1.2.0" localization="OSGI-INF/l10n/SqliteDbService">
    <OCD id="org.eclipse.kura.internal.db.sqlite.provider.SqliteDbServiceImpl" 
         name="%name" 
         description="%description">

        <AD id="db.mode"
            name="%dbMode"
            type="String"
            cardinality="0" 
            required="true"
            default="IN_MEMORY"
            description="%dbModeDesc">
            <Option label="In Memory" value="IN_MEMORY"/>
            <Option label="Persisted" value="PERSISTED"/>
         </AD>

         <AD id="db.path"
            name="%dbPath"
            type="String"
            cardinality="0"
            required="true"
            default="/opt/mydb.sqlite"
            description="%dbPathDesc">
         </AD>
         
         <AD id="db.key"
            name="Encryption Key"
            type="Password"
            cardinality="0" 
            required="false"
            description="Allows to specify a key/passphrase for encrypting the database file. This feature requires a SQLite binary with an encryption extension, and is only relevant for persisted databases. The key format can be specified using the Encryption Key Format parameter. If the value of this parameter is changed, the encryption key of the database will be updated accordingly. This parameter can be left empty to create an unencrypted database or to decrypt an encrypted one."/>
            
         <AD id="db.key.format"
            name="Encryption Key Format"
            type="String"
            cardinality="0" 
            required="true"
            default="ASCII"
            description="Allows to specify the format of the Encryption Key parameter value. The possible values are ASCII (an ASCII string), Hex SSE (the key is an hexadecimal string to be used with the SSE extension) or Hex SQLCipher (the key is an hexadecimal string to be used with the SQLCipher extension)">
            <Option label="ASCII" value="ASCII"/>
            <Option label="Hex SSE" value="HEX_SSE"/>
            <Option label="Hex SQLCipher" value="HEX_SQLCIPHER"/>
         </AD>

         <AD id="db.journal.mode"
            name="%dbJournalMode"
            type="String"
            cardinality="0" 
            required="true"
            default="WAL"
            description="%dbJournalModeDesc">
            <Option label="Rollback Journal" value="ROLLBACK_JOURNAL"/>
            <Option label="WAL" value="WAL"/>
         </AD>

         <AD id="db.defrag.interval.seconds"
            name="%defragInterval"
            type="Long"
            cardinality="0" 
            required="true"
            default="900"
            min="60"
            description="%defragIntervalDesc"/>

         <AD id="db.wal.checkpoint.interval.seconds"
            name="%checkpointInterval"
            type="Long"
            cardinality="0" 
            required="true"
            default="600"
            min="0"
            description="%checkpointIntervalDesc"/>

         <AD id="db.connection.pool.max.size"
            name="%poolMaxSize"
            type="Integer"
            cardinality="0" 
            required="true"
            default="10"
            min="1"
            description="%poolMaxSizeDesc"/>

        <AD id="debug.shell.access.enabled"
            name="%debugShellAccessEnabled"
            type="Boolean"
            cardinality="0" 
            required="true"
            default="false"
            description="%debugShellAccessEnabledDesc"/>

        </OCD>
    <Designate pid="org.eclipse.kura.internal.db.sqlite.provider.SqliteDbServiceImpl" factoryPid="org.eclipse.kura.internal.db.sqlite.provider.SqliteDbServiceImpl">
        <Object ocdref="org.eclipse.kura.internal.db.sqlite.provider.SqliteDbServiceImpl"/>
    </Designate>
</MetaData>
