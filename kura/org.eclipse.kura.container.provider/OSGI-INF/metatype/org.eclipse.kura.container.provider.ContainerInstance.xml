<?xml version="1.0" encoding="UTF-8"?>
<!--
     Copyright (c) 2022, 2024 Eurotech and/or its affiliates and others
   
     This program and the accompanying materials are made
     available under the terms of the Eclipse Public License 2.0
     which is available at https://www.eclipse.org/legal/epl-2.0/
  
 	SPDX-License-Identifier: EPL-2.0
 	
 	Contributors:
 	 Eurotech
 -->
<MetaData xmlns="http://www.osgi.org/xmlns/metatype/v1.2.0" localization="OSGI-INF/l10n/ContainerInstance">
    <OCD id="org.eclipse.kura.container.provider.ContainerInstance" name="%name"
        description="%description">

        <AD id="container.enabled" name="%containerEnabled" type="Boolean" cardinality="1" required="true" default="false"
            description="%containerEnabledDesc">
        </AD>
        
        <AD id="container.image" 
            name="%containerImage" 
            description="%containerImageDesc"
            type="String" cardinality="1" required="true" default="nginx" />

        <AD id="container.image.tag" name="%containerImageTag"
            description="%containerImageTagDesc" type="String"
            cardinality="1" required="true" default="latest" />

        <AD id="container.signature.trust.anchor" name="%containerSignatureTrustAnchor"
            description="%containerSignatureTrustAnchorDesc" type="String"
            cardinality="1" required="false" default="" />

        <AD id="container.signature.verify.transparency.log" name="%containerSignatureVerifyTransparencyLog"
            description="%containerSignatureVerifyTransparencyLogDesc" type="Boolean"
            cardinality="1" required="false" default="true" />
        
        <AD id="registry.hostname" name="%registryHostname"
            description="%registryHostnameDesc" 
            type="String"
            cardinality="0" required="false" default="" />
            
        <AD id="registry.username" name="%registryUsername"
            description="%registryUsernameDesc"
            type="String"
            cardinality="0" 
            required="false" 
            default="" />
            
        <AD id="registry.password" name="%registryPassword"
            description="%registryPasswordDesc" 
            type="Password"
            cardinality="0" required="false" default="" />
        
        <AD id="container.image.download.retries" 
            name="%containerImageDownloadRetries" 
            description="%containerImageDownloadRetriesDesc"
            type="Integer" 
            cardinality="1" 
            min="0"
            required="true" 
            default="5" />
            
        <AD id="container.image.download.interval" 
            name="%containerImageDownloadInterval" 
            description="%containerImageDownloadIntervalDesc"
            type="Integer" 
            cardinality="1" 
            min="0"
            required="true" 
            default="30000" />
        
        <AD id="container.image.download.timeout" 
            name="%containerImageDownloadTimeout"
            description="%containerImageDownloadTimeoutDesc" 
            type="Integer"
            cardinality="0" 
            required="true" 
            min="1"
            default="500" />

        <AD id="container.ports.internal" name="%containerPortsInternal"
            description="%containerPortsInternalDesc" 
            type="String" cardinality="1" required="false"
            default="80:tcp" />

        <AD id="container.ports.external" name="%containerPortsExternal"
            description="%containerPortsExternalDesc" 
            type="String" cardinality="1" required="false"
            default="8080" />

        <AD id="container.privileged" name="%containerPrivileged" type="Boolean" cardinality="1" required="true" default="false"
            description="%containerPrivilegedDesc">
        </AD>
        
        <AD id="container.env" name="%containerEnv"
            description="%containerEnvDesc" 
            type="String" cardinality="1"
            required="false" default="" />
            
        <AD id="container.entrypoint" name="%entrypointOverride"
            description="%entrypointOverrideDesc"
            type="String" cardinality="1"
            required="false" default="" />
            
        <AD id="container.memory" name="%containerMemory"
            description="%containerMemoryDesc"
            type="String" cardinality="0"
            required="false" default="" />
            
        <AD id="container.cpus" name="%containerCpus"
            description="%containerCpusDesc"
            type="Float" cardinality="0"
            required="false" default="" />

        <AD id="container.gpus" name="%containerGpus"
            description="%containerGpusDesc"
            type="String" cardinality="1"
            required="false" default="" />
                        
        <AD id="container.volume" name="%containerVolume"
            description="%containerVolumeDesc" 
            type="String" cardinality="1"
            required="false" default="" />
            
        <AD id="container.device" name="%containerDevice"
            description="%containerDeviceDesc" 
            type="String" cardinality="1"
            required="false" default="" />
            
        <AD id="container.runtime"
            name="%containerRuntime"
            description="%containerRuntimeDesc"
            type="String"
            cardinality="1"
            required="false"
            default="">
        </AD>
            
        <AD id="container.networkMode" 
            name="%containerNetworkingMode"
            description="%containerNetworkingModeDesc" type="String" cardinality="0"
            required="false" 
            default="">
         </AD>
         
        <AD id="container.loggingType" 
            name="%containerLoggingType"
            description="%containerLoggingTypeDesc" type="String" cardinality="0"
            required="true" 
            default="DEFAULT">
            <Option label="NONE" value="NONE" />
            <Option label="DEFAULT" value="DEFAULT" />
            <Option label="LOCAL" value="LOCAL" />
            <Option label="ETWLOGS" value="ETWLOGS" />
            <Option label="JSON_FILE" value="JSON_FILE" />
            <Option label="SYSLOG" value="SYSLOG" />
            <Option label="JOURNALD" value="JOURNALD" />
            <Option label="GELF" value="GELF" />
            <Option label="FLUENTD" value="FLUENTD" />
            <Option label="AWSLOGS" value="AWSLOGS" />
            <Option label="DB" value="DB" />
            <Option label="SPLUNK" value="SPLUNK" />
            <Option label="GCPLOGS" value="GCPLOGS" />
            <Option label="LOKI" value="LOKI" />
         </AD>
            
       <AD id="container.loggerParameters" name="%containerLoggerParameters"
            description="%containerLoggerParametersDesc" type="String" cardinality="1"
            required="false" default="max-size=10m" />

        <AD id="container.restart.onfailure" name="%containerRestartOnfailure" type="Boolean" cardinality="1" required="true" default="false"
            description="%containerRestartOnfailureDesc">
        </AD>
        
        <AD
            id="enforcement.digest"
            name="Container Image Enforcement Digest "
            description="Digest of the container image allowed to run on the device if the Container Enforcement Monitor is enabled. If not given, it will be computed by the Container Signature Verification service."
            type="String" cardinality="1" required="false"
            default="" />
            
    </OCD>
    <Designate pid="org.eclipse.kura.container.provider.ContainerInstance"
        factoryPid="org.eclipse.kura.container.provider.ContainerInstance">
        <Object ocdref="org.eclipse.kura.container.provider.ContainerInstance" />
    </Designate>
</MetaData>
